"use strict";(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[3997],{43997:(t,e,n)=>{n.r(e),n.d(e,{default:()=>p});var o=n(1483),i=n(82295),s=n(66835),a=n(57861),r=n(70941),c=n(23477),l=n(24076),m=n(61113),u=n(46417);const p=function(){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(m.Z,{variant:"h4",className:"mb-40 font-700",children:"FuseAuthorization"}),(0,u.jsxs)(m.Z,{className:"mb-16",component:"p",children:[(0,u.jsx)("code",{children:"FuseAuthorization"})," is the authorization component of the Fuse React. It restricts unauthorized user access by looking at"," ",(0,u.jsx)("b",{children:"route configs"})," and ",(0,u.jsx)("b",{children:"user.role"}),"."]}),(0,u.jsx)(m.Z,{className:"text-20 mt-20 mb-10 font-700",variant:"h5",children:"Setup"}),(0,u.jsx)(m.Z,{className:"mb-16",component:"p",children:"The component should wraps the FuseTheme component."}),(0,u.jsx)(m.Z,{className:"inline-block mb-8 italic",component:"code",children:"src/app/App.js"}),(0,u.jsx)(o.Z,{component:"pre",className:"language-jsx",children:n(39025)}),(0,u.jsx)(m.Z,{className:"text-20 mt-20 mb-10 font-700",variant:"h5",children:"Configuration"}),(0,u.jsx)(m.Z,{className:"text-16 mt-16 mb-10 font-700",variant:"h6",children:"Route Configuration:"}),(0,u.jsxs)(m.Z,{className:"mb-16",component:"p",children:["You need to define authorization (auth) in the ",(0,u.jsx)("b",{children:"route config files"})," ","to control the access via permission roles."]}),(0,u.jsx)(m.Z,{className:"mt-32 mb-8",variant:"subtitle2",children:"Example Usage:"}),(0,u.jsx)(m.Z,{className:"inline-block mb-8 italic",component:"code",children:"src/app/main/auth/admin-role-example/AdminRoleExampleConfig.js"}),(0,u.jsx)(o.Z,{component:"pre",className:"language-jsx",children:n(44657)}),(0,u.jsx)(m.Z,{className:"my-16",component:"p",children:"You can also give different auth values for individual routes with writing auth value inside the route object."}),(0,u.jsx)(i.Z,{className:"max-w-md my-16",children:(0,u.jsxs)(s.Z,{children:[(0,u.jsx)(c.Z,{children:(0,u.jsxs)(l.Z,{children:[(0,u.jsx)(r.Z,{className:"font-semibold text-14",children:"Authorization Role (auth) options"}),(0,u.jsx)(r.Z,{})]})}),(0,u.jsxs)(a.Z,{children:[(0,u.jsxs)(l.Z,{children:[(0,u.jsx)(r.Z,{children:(0,u.jsx)("code",{children:"null"})}),(0,u.jsx)(r.Z,{children:"Do not check, allow everyone"})]}),(0,u.jsxs)(l.Z,{children:[(0,u.jsx)(r.Z,{children:(0,u.jsx)("code",{children:"[]"})}),(0,u.jsx)(r.Z,{children:"Only guest allowed"})]}),(0,u.jsxs)(l.Z,{children:[(0,u.jsx)(r.Z,{children:(0,u.jsx)("code",{children:"[admin,user]"})}),(0,u.jsx)(r.Z,{children:"Only 'admin' and 'user' roles are allowed"})]})]})]})}),(0,u.jsx)(m.Z,{className:"mt-48 mb-8",variant:"h6",children:"User.role Configuration:"}),(0,u.jsxs)(m.Z,{className:"mb-16",component:"p",children:["User ",(0,u.jsx)("b",{children:"role"})," and ",(0,u.jsx)("b",{children:"data"})," are stored at ",(0,u.jsx)("b",{children:"auth.user"})," in the redux store."]}),(0,u.jsx)(m.Z,{className:"mb-16",component:"p",children:"After successful login user.role will be updated and the FuseAuthorization automatically redirects the authorized user."}),(0,u.jsx)(m.Z,{className:"inline-block mb-8 italic",component:"code",children:"src/app/auth/store/reducers/user.reducer.js (initial user state)"}),(0,u.jsx)(o.Z,{component:"pre",className:"language-js",children:"  \n\t\t\t\t  \tconst initialState = {\n\t\t\t\t\t\trole: [],//guest\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t'displayName': 'John Doe',\n\t\t\t\t\t\t\t'photoURL'   : 'assets/images/avatars/Velazquez.jpg',\n\t\t\t\t\t\t\t'email'      : 'johndoe@withinpixels.com',\n\t\t\t\t\t\t\tshortcuts    : [\n\t\t\t\t\t\t\t\t'calendar',\n\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t'contacts',\n\t\t\t\t\t\t\t\t'todo'\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t "}),(0,u.jsx)(i.Z,{className:"max-w-md my-16",children:(0,u.jsxs)(s.Z,{children:[(0,u.jsx)(c.Z,{children:(0,u.jsxs)(l.Z,{children:[(0,u.jsx)(r.Z,{className:"font-semibold text-14",children:"User Role options"}),(0,u.jsx)(r.Z,{})]})}),(0,u.jsxs)(a.Z,{children:[(0,u.jsxs)(l.Z,{children:[(0,u.jsxs)(r.Z,{children:[(0,u.jsx)("code",{children:"null"})," or ",(0,u.jsx)("code",{children:"undefined"})," or ",(0,u.jsx)("code",{children:"[]"})]}),(0,u.jsx)(r.Z,{children:"Guest"})]}),(0,u.jsxs)(l.Z,{children:[(0,u.jsxs)(r.Z,{children:[(0,u.jsx)("code",{children:"['admin','user']"})," (array)"]}),(0,u.jsx)(r.Z,{children:"User has roles 'admin' and 'user'"})]}),(0,u.jsxs)(l.Z,{children:[(0,u.jsxs)(r.Z,{children:[(0,u.jsx)("code",{children:'"admin"'})," (string)"]}),(0,u.jsx)(r.Z,{children:"User has 'admin' role"})]})]})]})}),(0,u.jsx)(m.Z,{className:"mt-48 mb-8",variant:"h6",children:"Navigation Item Configuration:"}),(0,u.jsxs)(m.Z,{className:"mb-16",component:"p",children:["You can control the navigation ",(0,u.jsx)("b",{children:"item/group/collapse"})," visibility by adding ",(0,u.jsx)("b",{children:"auth"}),"property in ",(0,u.jsx)("code",{children:"src/app/fuse-configs/NavigationConfig.js"}),"."]}),(0,u.jsx)(m.Z,{className:"mt-32 mb-8",variant:"subtitle2",children:"Example Usage:"}),(0,u.jsx)(o.Z,{component:"pre",className:"language-js",children:"\n\t\t\t\t\t {\n\t\t\t\t\t\t'id'   : 'only-admin-navigation-item',\n\t\t\t\t\t\t'title': 'Nav item only for Admin',\n\t\t\t\t\t\t'type' : 'item',\n\t\t\t\t\t\t'auth' : authRoles.admin,//['admin']\n\t\t\t\t\t\t'url'  : '/auth/admin-role-example',\n\t\t\t\t\t\t'icon' : 'verified_user'\n\t\t\t\t\t  },\n\t\t\t\t"}),(0,u.jsx)(m.Z,{className:"mt-48 mb-4",variant:"h5",children:"Making the the whole app auth protected:"}),(0,u.jsx)(m.Z,{className:"mb-12",variant:"subtitle2",children:"On routesConfig.js file"}),(0,u.jsxs)(m.Z,{className:"mb-16",component:"p",children:["If you don't want to set auth on every page config;",(0,u.jsx)("br",{}),"You can give default auth role value in the"," ",(0,u.jsx)("code",{children:"src/app/fuse-configs/routesConfig.js"}),"file,",(0,u.jsx)("br",{}),"Set defaultAuth paramater",(0,u.jsx)("code",{children:"FuseUtils.generateRoutesFromConfigs(routeConfigs, ['admin','staff','user'])"}),",",(0,u.jsx)("br",{}),"The individual route configs which has auth option won't be overridden,",(0,u.jsx)("br",{}),"With this configuration below, makes ",(0,u.jsx)("b",{children:"whole app"})," auth protected by default:"]}),(0,u.jsx)(o.Z,{component:"pre",className:"language-js",children:"\n\t\t\t\t\timport {Redirect} from 'react-router-dom';\n\t\t\t\t\timport FuseUtils from '@fuse/utils';\n\t\t\t\t\timport {appsConfigs} from 'app/main/apps/appsConfigs';\n\t\t\t\t\timport {pagesConfigs} from 'app/main/pages/pagesConfigs';\n\t\t\t\t\timport {authRoleExamplesConfigs} from 'app/main/auth/authRoleExamplesConfigs';\n\t\t\t\t\timport {UserInterfaceConfig} from 'app/main/user-interface/UserInterfaceConfig';\n\t\t\t\t\timport {DocumentationConfig} from 'app/main/documentation/DocumentationConfig';\n\t\t\t\t\timport {LoginConfig} from 'app/main/login/LoginConfig';\n\t\t\t\t\timport {RegisterConfig} from 'app/main/register/RegisterConfig';\n\t\t\t\t\timport {LogoutConfig} from 'app/main/logout/LogoutConfig';\n\t\t\t\t\timport {CallbackConfig} from 'app/main/callback/CallbackConfig';\n\t\t\t\t\t\n\t\t\t\t\tconst routeConfigs = [\n\t\t\t\t\t\t...appsConfigs,\n\t\t\t\t\t\t...pagesConfigs,\n\t\t\t\t\t\t...authRoleExamplesConfigs,\n\t\t\t\t\t\tUserInterfaceConfig,\n\t\t\t\t\t\tDocumentationConfig,\n\t\t\t\t\t\tLogoutConfig,\n\t\t\t\t\t\tLoginConfig,\n\t\t\t\t\t\tRegisterConfig,\n\t\t\t\t\t\tLogoutConfig,\n\t\t\t\t\t\tCallbackConfig,\n\t\t\t\t\t];\n\t\t\t\t\t\n\t\t\t\t\tconst routes = [\n\t\t\t\t\t\t...FuseUtils.generateRoutesFromConfigs(routeConfigs, ['admin','staff','user']),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpath     : '/',\n\t\t\t\t\t\t\texact    : true,\n\t\t\t\t\t\t\tcomponent: () => <Redirect to=\"/apps/dashboards/analytics\"/>\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcomponent: () => <Redirect to=\"/pages/errors/error-404\"/>\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\t\t\t\t\t\n\t\t\t\t\texport default routes;\n\t\t\t\t"}),(0,u.jsx)(m.Z,{className:"mt-48 mb-4",variant:"h5",children:"Allow everyone(guest,user) for accessing root (/) page as a landing page"}),(0,u.jsxs)(m.Z,{className:"mb-16",component:"p",children:["After configuring to make whole app protected as above, we need to set"," ",(0,u.jsx)("code",{children:"auth:null"})," at the route: ",(0,u.jsx)("code",{children:"/"})," to make it accessible for everyone.",(0,u.jsx)("br",{}),"If you redirect the main route (/), also make sure to set the redirected route config",(0,u.jsx)("code",{children:"auth:null"}),"."]}),(0,u.jsx)(o.Z,{component:"pre",className:"language-js",children:"\n\t\t\t\t\timport {Redirect} from 'react-router-dom';\n\t\t\t\t\timport FuseUtils from '@fuse/utils';\n\t\t\t\t\timport {appsConfigs} from 'app/main/apps/appsConfigs';\n\t\t\t\t\timport {pagesConfigs} from 'app/main/pages/pagesConfigs';\n\t\t\t\t\timport {authRoleExamplesConfigs} from 'app/main/auth/authRoleExamplesConfigs';\n\t\t\t\t\timport {UserInterfaceConfig} from 'app/main/user-interface/UserInterfaceConfig';\n\t\t\t\t\timport {DocumentationConfig} from 'app/main/documentation/DocumentationConfig';\n\t\t\t\t\timport {LoginConfig} from 'app/main/login/LoginConfig';\n\t\t\t\t\timport {RegisterConfig} from 'app/main/register/RegisterConfig';\n\t\t\t\t\timport {LogoutConfig} from 'app/main/logout/LogoutConfig';\n\t\t\t\t\timport {CallbackConfig} from 'app/main/callback/CallbackConfig';\n\t\t\t\t\t\n\t\t\t\t\tconst routeConfigs = [\n\t\t\t\t\t\t...appsConfigs,\n\t\t\t\t\t\t...pagesConfigs,\n\t\t\t\t\t\t...authRoleExamplesConfigs,\n\t\t\t\t\t\tUserInterfaceConfig,\n\t\t\t\t\t\tDocumentationConfig,\n\t\t\t\t\t\tLogoutConfig,\n\t\t\t\t\t\tLoginConfig,\n\t\t\t\t\t\tRegisterConfig,\n\t\t\t\t\t\tLogoutConfig,\n\t\t\t\t\t\tCallbackConfig\n\t\t\t\t\t];\n\t\t\t\t\t\n\t\t\t\t\tconst routes = [\n\t\t\t\t\t\t//if you want to make whole app auth protected by default change defaultAuth for example:\n\t\t\t\t\t\t// ...FuseUtils.generateRoutesFromConfigs(routeConfigs, ['admin','staff','user']),\n\t\t\t\t\t\t// The individual route configs which has auth option won't be overridden.\n\t\t\t\t\t\t...FuseUtils.generateRoutesFromConfigs(routeConfigs, ['admin', 'staff', 'user']),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpath     : '/',\n\t\t\t\t\t\t\texact    : true,\n\t\t\t\t\t\t\tauth     : null,\n\t\t\t\t\t\t\tcomponent: LandingPage\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcomponent: () => <Redirect to=\"/pages/errors/error-404\"/>\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\t\t\t\t\t\n\t\t\t\t\texport default routes;\n\t\t\t\t"}),(0,u.jsx)(m.Z,{className:"mt-48 mb-4",variant:"h5",children:"Redirect the logged-in user to a specific route depending on his role"}),(0,u.jsxs)(m.Z,{className:"mb-16",component:"p",children:["Before dispatching ",(0,u.jsx)("b",{children:"SET_USER_DATA"})," action you can set redirectUrl on"]}),(0,u.jsx)(m.Z,{className:"inline-block mb-8 italic",component:"code",children:"src/app/auth/store/userSlice.js"}),(0,u.jsx)(o.Z,{component:"pre",className:"language-js",children:"\n\t\t\t\t\texport const setUserData = user => async (dispatch, getState) => {\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t\tYou can redirect the logged-in user to a specific route depending on his role\n\t\t\t\t\t\t */\n\t\t\t\t\t\t\n\t\t\t\t\t\thistory.location.state = {\n\t\t\t\t\t\t\tredirectUrl: user.redirectUrl // for example 'apps/academy'\n\t\t\t\t\t\t};\n\t\t\t\t\t\t\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t\tSet User Settings\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tdispatch(setDefaultSettings(user.data.settings));\n\t\t\t\t\t\t\n\t\t\t\t\t\tdispatch(setUser(user));\n\t\t\t\t\t};\n\t\t\t\t"}),(0,u.jsx)(m.Z,{className:"mt-48 mb-4",variant:"h5",children:"Uncaught Error: Maximum update depth exceeded: Infinite loops"}),(0,u.jsxs)(m.Z,{className:"mb-16",component:"p",children:["If you are getting this error, make sure authenticated user has rights to access main route ",(0,u.jsx)("b",{children:'"/"'}),"or it's redirected route path."]}),(0,u.jsxs)(m.Z,{className:"mb-16",component:"p",children:["After successful login, every authenticated user should be able to access to main route path ",(0,u.jsx)("b",{children:'"/"'})," or redirected route path."]})]})}},39025:(t,e,n)=>{n.r(e),n.d(e,{default:()=>o});const o='// import "@fake-db"\nimport { Router } from "react-router-dom";\nimport FuseAuthorization from "@fuse/core/FuseAuthorization";\nimport FuseLayout from "@fuse/core/FuseLayout";\nimport FuseTheme from "@fuse/core/FuseTheme";\nimport history from "@history";\n// import { ChatwootScript } from "chatwoot-react";\nimport  Livechat  from "./LiveChat";\nimport { SnackbarProvider } from "notistack";\nimport { useSelector } from "react-redux";\nimport rtlPlugin from "stylis-plugin-rtl";\nimport createCache from "@emotion/cache";\nimport { CacheProvider } from "@emotion/react";\nimport { selectCurrLangDir } from "app/store/i18nSlice";\nimport withAppProviders from "./withAppProviders";\nimport { Auth } from "./auth";\n\n// import axios from "axios";\n/**\n * Axios HTTP Request defaults\n */\n//  axios.defaults.baseURL = "";\n//  axios.defaults.headers.common[\'Access-Control-Allow-Origin\'] = \'*\';\n//  axios.defaults.headers.common[\'Content-Type\'] = \'application/x-www-form-urlencoded\';\n\nconst emotionCacheOptions = {\n  rtl: {\n    key: "muirtl",\n    stylisPlugins: [rtlPlugin],\n    prepend: true,\n  },\n  ltr: {\n    key: "muiltr",\n    stylisPlugins: [],\n    prepend: true,\n  },\n};\n\nconst App = () => {\n  const langDirection = useSelector(selectCurrLangDir);\n\n  return (\n    <CacheProvider value={createCache(emotionCacheOptions[langDirection])}>\n      <Auth>\n        <Router history={history}>\n          <FuseAuthorization>\n            <FuseTheme>\n              <SnackbarProvider\n                maxSnack={5}\n                anchorOrigin={{\n                  vertical: "bottom",\n                  horizontal: "right",\n                }}\n                classes={{\n                  containerRoot:\n                    "bottom-0 right-0 mb-52 md:mb-68 mr-8 lg:mr-80 z-99",\n                }}\n              >\n                {/* <ChatwootScript token="ScuNgw91dkJhEXDwN5ooDdma" /> */}\n                <FuseLayout />\n                <Livechat />\n              </SnackbarProvider>\n            </FuseTheme>\n          </FuseAuthorization>\n        </Router>\n      </Auth>\n    </CacheProvider>\n  );\n};\n\nexport default withAppProviders(App)();\n'},44657:(t,e,n)=>{n.r(e),n.d(e,{default:()=>o});const o='import { authRoles } from "app/auth";\nimport AdminRoleExample from "./AdminRoleExample";\n\nconst AdminRoleExampleConfig = {\n  settings: {\n    layout: {\n      config: {},\n    },\n  },\n  auth: authRoles.admin, // [\'admin\']\n  routes: [\n    {\n      path: "/auth/admin-role-example",\n      component: AdminRoleExample,\n    },\n  ],\n};\n\nexport default AdminRoleExampleConfig;\n'}}]);