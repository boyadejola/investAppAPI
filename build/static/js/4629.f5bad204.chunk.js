"use strict";(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[4629],{47619:(e,a,l)=>{l.d(a,{Z:()=>P});var t=l(30168),r=l(92550),i=l(17592),s=l(83061),n=l(47313),o=l(70499),d=l(19860),c=l(36304),m=l(47295),p=l(45894),h=l(46417);const x=function(e){const a=(0,d.Z)(),l=(0,p.v9)((0,m.lK)(a.palette.primary.main));return(0,h.jsx)("div",{className:"FusePageCarded-header",children:e.header&&(0,h.jsx)(c.Z,{theme:l,children:e.header})})};var u=l(46923),f=l(57451),g=l(49920);const j=function(e){const a=(0,d.Z)(),l=(0,p.v9)((0,m.lK)(a.palette.primary.main));return(0,h.jsxs)(h.Fragment,{children:[e.header&&(0,h.jsx)(c.Z,{theme:l,children:(0,h.jsx)("div",{className:(0,s.default)("FusePageCarded-sidebarHeader",e.variant),children:e.header})}),e.content&&(0,h.jsx)(r.Z,{className:"FusePageCarded-sidebarContent",enable:e.innerScroll,children:e.content})]})};function b(e,a){const[l,t]=(0,n.useState)(!1);(0,n.useImperativeHandle)(a,(()=>({toggleSidebar:r})));const r=()=>{t(!l)};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(f.Z,{lgUp:"permanent"===e.variant,children:(0,h.jsx)(g.Z,{variant:"temporary",anchor:e.position,open:l,onOpen:e=>{},onClose:e=>r(),disableSwipeToOpen:!0,classes:{root:(0,s.default)("FusePageCarded-sidebarWrapper",e.variant),paper:(0,s.default)("FusePageCarded-sidebar",e.variant,"left"===e.position?"FusePageCarded-leftSidebar":"FusePageCarded-rightSidebar")},ModalProps:{keepMounted:!0},container:e.rootRef.current,BackdropProps:{classes:{root:"FusePageCarded-backdrop"}},style:{position:"absolute"},children:(0,h.jsx)(j,{...e})})}),"permanent"===e.variant&&(0,h.jsx)(f.Z,{lgDown:!0,children:(0,h.jsx)(u.ZP,{variant:"permanent",className:(0,s.default)("FusePageCarded-sidebarWrapper",e.variant),open:l,classes:{paper:(0,s.default)("FusePageCarded-sidebar",e.variant,"left"===e.position?"FusePageCarded-leftSidebar":"FusePageCarded-rightSidebar")},children:(0,h.jsx)(j,{...e})})})]})}const v=(0,n.forwardRef)(b);var Z;const y=(0,i.ZP)("div")((e=>{let{theme:a}=e;return{display:"flex",flexDirection:"row",minWidth:0,minHeight:"100%",position:"relative",flex:"1 1 auto",width:"100%",height:"auto",backgroundColor:a.palette.background.default,"& .FusePageCarded-innerScroll":{height:"100%"},"& .FusePageCarded-topBg":{position:"absolute",left:0,right:0,top:0,height:S,background:"linear-gradient(to right, ".concat(a.palette.primary.dark," 0%, ").concat(a.palette.primary.main," 100%)"),backgroundSize:"cover",pointerEvents:"none"},"& .FusePageCarded-contentWrapper":{display:"flex",flexDirection:"column",padding:"0 3.2rem",flex:"1 1 100%",zIndex:2,maxWidth:"100%",minWidth:0,minHeight:0,[a.breakpoints.down("sm")]:{padding:"0 1.6rem"}},"& .FusePageCarded-header":{height:w,minHeight:w,maxHeight:w,display:"flex",color:a.palette.primary.contrastText},"& .FusePageCarded-headerSidebarToggleButton":{color:a.palette.primary.contrastText},"& .FusePageCarded-contentCard":{display:"flex",flex:"1 1 100%",flexDirection:"column",backgroundColor:a.palette.background.paper,boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",minHeight:0,borderRadius:"20px 20px 0 0"},"& .FusePageCarded-toolbar":{height:C,minHeight:C,display:"flex",alignItems:"center",borderBottom:"1px solid ".concat(a.palette.divider)},"& .FusePageCarded-content":{flex:"1 1 auto",height:"100%",overflow:"auto",WebkitOverflowScrolling:"touch"},"& .FusePageCarded-sidebarWrapper":{position:"absolute",backgroundColor:"transparent",zIndex:5,overflow:"hidden","&.permanent":{[a.breakpoints.up("lg")]:{zIndex:1,position:"relative"}}},"& .FusePageCarded-sidebar":{position:"absolute","&.permanent":{[a.breakpoints.up("lg")]:{backgroundColor:"transparent",position:"relative",border:"none",overflow:"hidden"}},width:N,height:"100%"},"& .FusePageCarded-leftSidebar":{},"& .FusePageCarded-rightSidebar":{},"& .FusePageCarded-sidebarHeader":{height:S,minHeight:S,color:a.palette.primary.contrastText,backgroundColor:a.palette.primary.dark,"&.permanent":{[a.breakpoints.up("lg")]:{backgroundColor:"transparent"}}},"& .FusePageCarded-sidebarContent":{display:"flex",flex:"1 1 auto",flexDirection:"column",backgroundColor:a.palette.background.default,color:a.palette.text.primary,[a.breakpoints.up("lg")]:{overflow:"auto",WebkitOverflowScrolling:"touch"}},"& .FusePageCarded-backdrop":{position:"absolute"}}})),N=240,S=200,C=64,w=S-C,k=(0,n.forwardRef)(((e,a)=>{const l=(0,n.useRef)(null),t=(0,n.useRef)(null),i=(0,n.useRef)(null),d=e.rightSidebarHeader||e.rightSidebarContent,c=e.leftSidebarHeader||e.leftSidebarContent;return(0,n.useImperativeHandle)(a,(()=>({rootRef:i,toggleLeftSidebar:()=>{l.current.toggleSidebar()},toggleRightSidebar:()=>{t.current.toggleSidebar()}}))),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.Z,{styles:a=>({"#fuse-main":{height:e.innerScroll&&"100vh"}})}),(0,h.jsxs)(y,{className:(0,s.default)("FusePageCarded-root",e.innerScroll&&"FusePageCarded-innerScroll",e.className),ref:i,children:[(0,h.jsx)("div",{className:"FusePageCarded-topBg"}),(0,h.jsxs)("div",{className:"flex container w-full",children:[c&&(0,h.jsx)(v,{position:"left",header:e.leftSidebarHeader,content:e.leftSidebarContent,variant:e.leftSidebarVariant||"permanent",innerScroll:e.innerScroll,ref:l,rootRef:i}),(0,h.jsxs)("div",{className:(0,s.default)("FusePageCarded-contentWrapper",c&&(void 0===e.leftSidebarVariant||"permanent"===e.leftSidebarVariant)&&"lg:ltr:pl-0 lg:rtl:pr-0",d&&(void 0===e.rightSidebarVariant||"permanent"===e.rightSidebarVariant)&&"lg:pr-0"),children:[(0,h.jsx)(x,{header:e.header}),(0,h.jsxs)("div",{className:(0,s.default)("FusePageCarded-contentCard",e.innerScroll&&"inner-scroll"),children:[e.contentToolbar&&(0,h.jsx)("div",{className:"FusePageCarded-toolbar",children:e.contentToolbar}),e.content&&(0,h.jsx)(r.Z,{className:"FusePageCarded-content",enable:e.innerScroll,scrollToTopOnRouteChange:e.innerScroll,children:e.content})]})]}),d&&(0,h.jsx)(v,{position:"right",header:e.rightSidebarHeader,content:e.rightSidebarContent,variant:e.rightSidebarVariant||"permanent",innerScroll:e.innerScroll,ref:t,rootRef:i})]})]})]})}));k.defaultProps={};const P=(0,n.memo)((0,i.ZP)(k)(Z||(Z=(0,t.Z)([""]))))},14629:(e,a,l)=>{l.r(a),l.d(a,{default:()=>Je});var t=l(47619),r=l(23132),i=l(47313),s=l(45894),n=l(63830),o=l(17592),d=l(58970),c=l(48119),m=l(19536),p=l(71263),h=l(47131),x=l(61113),u=l(11755),f=l(69649),g=l(46417);const j=(0,o.ZP)("div")((e=>{let{theme:a,color:l}=e;return{display:"flex",alignItems:"center",height:20,borderRadius:10,padding:"0 6px",fontSize:10,backgroundColor:"rgba(0,0,0,.08);","& > span":{width:8,height:8,marginRight:4,borderRadius:"50%",backgroundColor:l}}}));const b=function(e){return(0,g.jsxs)(j,{className:e.className,color:e.color,children:[(0,g.jsx)("span",{}),(0,g.jsx)("div",{children:e.title})]})};var v=l(80827),Z=l(35662);const y=(0,v.hg)("mailApp/labels/getLabels",(async()=>{const e=await Z.Z.get("/api/mail-app/labels");return await e.data})),N=(0,v.HF)({}),{selectAll:S,selectEntities:C,selectById:w}=N.getSelectors((e=>e.mailApp.labels)),k=(0,v.oM)({name:"mailApp/labels",initialState:N.getInitialState(null),reducers:{},extraReducers:{[y.fulfilled]:N.setAll}}).reducer;var P=l(43850);const A=(0,v.hg)("mailApp/mail/getMail",(async e=>{const a=await Z.Z.get("/api/mail-app/mail",{params:e});return await a.data})),F=(0,v.hg)("mailApp/mail/updateMail",(async(e,a)=>{let{getState:l,dispatch:t}=a;const{id:r}=l().mailApp.mail,i=await Z.Z.post("/api/mail-app/update-mail",{id:r,...e}),s=await i.data;return t((0,P.PV)({message:"Mail Saved"})),s})),I=(0,v.oM)({name:"mailApp/mail",initialState:null,reducers:{},extraReducers:{[A.fulfilled]:(e,a)=>a.payload,[F.fulfilled]:(e,a)=>({...e,...a.payload})}}).reducer;const M=(0,n.EN)((function(e){const a=(0,s.I0)(),l=(0,s.v9)((e=>{let{mailApp:a}=e;return a.mail})),t=(0,s.v9)(C),r=(0,n.UO)(),[o,j]=(0,i.useState)(!1);return(0,f.KW)((()=>{a(A(r))}),[a,r]),l?(0,g.jsxs)("div",{className:"p-16 sm:p-24",children:[(0,g.jsx)("div",{className:"flex items-center justify-between overflow-hidden",children:(0,g.jsxs)("div",{className:"flex flex-col",children:[(0,g.jsx)(u.E.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.1}},children:(0,g.jsx)(x.Z,{variant:"subtitle1",className:"flex",children:l.subject})}),!d.Z.isEmpty(t)&&l.labels.length>0&&(0,g.jsx)("div",{className:"flex flex-wrap mt-8 -mx-2",children:l.labels.map((e=>(0,g.jsx)(b,{className:"mt-4 mx-2",title:t[e].title,color:t[e].color},e)))})]})}),(0,g.jsx)(m.Z,{className:"my-24"}),(0,g.jsxs)(u.E.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1,transition:{delay:.2}},children:[(0,g.jsxs)("div",{className:"flex items-start justify-between",children:[(0,g.jsxs)("div",{className:"flex items-center justify-start",children:[l.from.avatar?(0,g.jsx)(c.Z,{alt:l.from.name,src:l.from.avatar}):(0,g.jsx)(c.Z,{children:l.from.name[0]}),(0,g.jsxs)("div",{className:"flex flex-col mx-8",children:[(0,g.jsx)("span",{children:l.from.name}),(0,g.jsxs)(x.Z,{component:"div",color:"textSecondary",variant:"body1",className:"flex items-center justify-start",children:[(0,g.jsx)("div",{children:"to"}),(0,g.jsx)("div",{className:"mx-4",children:l.to[0].name})]})]})]}),(0,g.jsx)(h.Z,{size:"large",children:(0,g.jsx)(p.Z,{children:"more_vert"})})]}),(0,g.jsxs)("div",{className:"my-16",children:[(0,g.jsx)(x.Z,{color:"primary",className:"cursor-pointer underline mb-8",onClick:()=>{j(!o)},children:o?(0,g.jsx)("span",{children:"Hide Details"}):(0,g.jsx)("span",{children:"Show Details"})}),o&&(0,g.jsxs)("div",{className:"flex",children:[(0,g.jsxs)(x.Z,{variant:"body2",className:"flex flex-col",children:[(0,g.jsx)("span",{children:"From:"}),(0,g.jsx)("span",{children:"To:"}),(0,g.jsx)("span",{children:"Date:"})]}),(0,g.jsxs)(x.Z,{variant:"body2",color:"textSecondary",className:"px-4 flex flex-col",children:[(0,g.jsx)("span",{children:l.from.email}),(0,g.jsx)("span",{children:l.to[0].email}),(0,g.jsx)("span",{children:l.time})]})]})]}),(0,g.jsx)(x.Z,{className:"text-14 my-24 leading-normal",variant:"body2",dangerouslySetInnerHTML:{__html:l.message}}),(0,g.jsx)(m.Z,{className:"my-24"}),l.attachments&&(0,g.jsxs)("div",{children:[(0,g.jsxs)(x.Z,{variant:"subtitle1",className:"mb-16",children:[(0,g.jsx)("span",{className:"mx-4 font-medium",children:"Attachments"}),(0,g.jsxs)("span",{children:["(",l.attachments.length,")"]})]}),(0,g.jsx)("div",{className:"flex flex-wrap -mx-8",children:l.attachments.map((e=>(0,g.jsxs)("div",{className:"w-128 px-8 pb-16",children:[(0,g.jsx)("img",{className:"w-full rounded-16",src:e.preview,alt:e.fileName}),(0,g.jsxs)("div",{className:"flex flex-col pt-8",children:[(0,g.jsx)(x.Z,{color:"primary",className:"hover:underline cursor-pointer",onClick:e=>e.preventDefault(),children:"View"}),(0,g.jsx)(x.Z,{color:"primary",className:"hover:underline cursor-pointer",onClick:e=>e.preventDefault(),children:"Download"}),(0,g.jsxs)(x.Z,{className:"text-12",children:["(",e.size,")"]})]})]},e.fileName)))})]})]})]}):null}));var E=l(19860);const R=l(64883);const T=(0,n.EN)((function(e){const a=(0,s.I0)(),l=(0,s.v9)((e=>{let{mailApp:a}=e;return a.mail})),t=(0,E.Z)(),r=R.compile(e.match.path),i={...(0,n.UO)()};delete i.mailId;const o=r(i);return l?(0,g.jsxs)("div",{className:"flex flex-1 items-center justify-between overflow-hidden sm:px-16",children:[(0,g.jsx)(h.Z,{onClick:()=>e.history.push(o),size:"large",children:(0,g.jsx)(p.Z,{children:"ltr"===t.direction?"arrow_back":"arrow_forward"})}),(0,g.jsxs)("div",{className:"flex items-center justify-start","aria-label":"Toggle star",children:[(0,g.jsx)(u.E.div,{initial:{scale:0},animate:{scale:1,transition:{delay:.1}},children:(0,g.jsx)(h.Z,{onClick:()=>a(F({starred:!l.starred})),size:"large",children:l.starred?(0,g.jsx)(p.Z,{children:"star"}):(0,g.jsx)(p.Z,{children:"star_border"})})}),(0,g.jsx)(u.E.div,{initial:{scale:0},animate:{scale:1,transition:{delay:.1}},children:(0,g.jsx)(h.Z,{onClick:()=>a(F({important:!l.important})),size:"large",children:l.important?(0,g.jsx)(p.Z,{children:"label"}):(0,g.jsx)(p.Z,{children:"label_off"})})})]})]}):null}));var H=l(57451),z=l(42461),O=l(82295),W=l(36304),B=l(24511),_=l(47295);const L=(0,v.hg)("mailApp/mails/getMails",(async(e,a)=>{let{getState:l}=a;e=e||l().mailApp.mails.routeParams;const t=await Z.Z.get("/api/mail-app/mails",{params:e});return{data:await t.data,routeParams:e}})),D=(0,v.hg)("mailApp/mails/setFolderOnSelectedMails",(async(e,a)=>{let{dispatch:l,getState:t}=a;const{selectedMailIds:r}=t().mailApp.mails,i=await Z.Z.post("/api/mail-app/set-folder",{selectedMailIds:r,folderId:e}),s=await i.data;return l(L()),s})),U=(0,v.hg)("mailApp/mails/toggleLabelOnSelectedMails",(async(e,a)=>{let{dispatch:l,getState:t}=a;const{selectedMailIds:r}=t().mailApp.mails,i=await Z.Z.post("/api/mail-app/toggle-label",{selectedMailIds:r,labelId:e}),s=await i.data;return l(L()),s})),V=(0,v.HF)({}),{selectAll:Q,selectById:$}=V.getSelectors((e=>e.mailApp.mails)),K=(0,v.oM)({name:"mailApp/mails",initialState:V.getInitialState({searchText:"",routeParams:{},selectedMailIds:[]}),reducers:{setMailsSearchText:{reducer:(e,a)=>{e.searchText=a.payload},prepare:e=>({payload:e.target.value||""})},selectAllMails:(e,a)=>{e.selectedMailIds=e.ids},deselectAllMails:(e,a)=>{e.selectedMailIds=[]},selectMailsByParameter:(e,a)=>{const[l,t]=a.payload;e.selectedMailIds=e.ids.filter((a=>e.entities[a][l]===t))},toggleInSelectedMails:(e,a)=>{const l=a.payload;e.selectedMailIds=e.selectedMailIds.includes(l)?e.selectedMailIds.filter((e=>e!==l)):[...e.selectedMailIds,l]}},extraReducers:{[L.fulfilled]:(e,a)=>{const{data:l,routeParams:t}=a.payload;V.setAll(e,l),e.routeParams=t,e.selectedMailIds=[]}}}),{setMailsSearchText:Y,selectAllMails:q,deselectAllMails:G,selectMailsByParameter:X,toggleInSelectedMails:J}=K.actions,ee=K.reducer;const ae=function(e){const a=(0,s.I0)(),l=(0,s.v9)((e=>{let{mailApp:a}=e;return a.mails.searchText})),t=(0,s.v9)(_.rg),{t:r}=(0,B.$)("mailApp");return(0,g.jsx)(W.Z,{theme:t,children:(0,g.jsx)("div",{className:"flex flex-1",children:(0,g.jsxs)(O.Z,{className:"flex items-center w-full h-48 sm:h-56 p-16 ltr:pl-4 lg:ltr:pl-16 rtl:pr-4 lg:rtl:pr-16 shadow",children:[(0,g.jsx)(H.Z,{lgUp:!0,children:(0,g.jsx)(h.Z,{onClick:a=>e.pageLayout.current.toggleLeftSidebar(),"aria-label":"open left sidebar",size:"large",children:(0,g.jsx)(p.Z,{children:"menu"})})}),(0,g.jsx)(p.Z,{color:"action",children:"search"}),(0,g.jsx)(z.Z,{placeholder:r("SEARCH_PLACEHOLDER"),className:"px-16",disableUnderline:!0,fullWidth:!0,value:l,inputProps:{"aria-label":"Search"},onChange:e=>a(Y(e))})]})})})};var le=l(5227),te=l(48310),re=l(60194),ie=l(83213),se=l(58800),ne=l(1432),oe=l(75908),de=l(24193),ce=l(94469),me=l(4117),pe=l(96467),he=l(24631),xe=l(9289),ue=l(43270),fe=l(3463),ge=l(52500),je=l(79489),be=l(82190),ve=l.n(be),Ze=(l(85463),l(83061));const ye=(0,o.ZP)("div")({"& .rdw-dropdown-selectedtext":{color:"inherit"},"& .rdw-editor-toolbar":{borderWidth:"0 0 1px 0!important",margin:"0!important"},"& .rdw-editor-main":{padding:"8px 12px",height:"".concat(256,"px!important")}}),Ne=(0,i.forwardRef)(((e,a)=>{const[l,t]=(0,i.useState)(ge.EditorState.createEmpty());return(0,g.jsx)(ye,{className:(0,Ze.default)("rounded-4 border-1 overflow-hidden w-full",e.className),ref:a,children:(0,g.jsx)(je.Editor,{editorState:l,onEditorStateChange:function(a){return t(a),e.onChange(ve()((0,ge.convertToRaw)(a.getCurrentContent())))}})})})),Se=(0,o.ZP)("div")({fontSize:13,backgroundColor:"rgba(0, 0, 0, 0.08)",border:"1px solid rgba(0, 0, 0, 0.16)",paddingLeft:16,marginBottom:8,borderRadius:2,display:"flex",justifyContent:"space-between",alignItems:"center","& .filename":{fontWeight:600},"& .size":{marginLeft:8,fontWeight:300}});const Ce=function(e){return(0,g.jsxs)(Se,{className:e.className,children:[(0,g.jsxs)("div",{className:"flex",children:[(0,g.jsx)(x.Z,{variant:"caption",className:"filename",children:e.fileName}),(0,g.jsxs)(x.Z,{variant:"caption",className:"size",children:["(",e.size,")"]})]}),(0,g.jsx)(h.Z,{size:"large",children:(0,g.jsx)(p.Z,{className:"text-16",children:"close"})})]})},we=fe.Ry().shape({to:fe.Z_().required("You must enter an e-mail").email("You must enter a valid e-mail.")});const ke=function(){const[e,a]=(0,i.useState)(!1),{watch:l,handleSubmit:t,formState:r,control:s}=(0,ue.cI)({mode:"onChange",defaultValues:{from:"johndoe@creapond.com",to:"",cc:"",bcc:"",subject:"",message:""},resolver:(0,ne.X)(we)}),{isValid:n,dirtyFields:o,errors:c}=r,{t:m}=(0,B.$)("mailApp");return(0,g.jsxs)("div",{className:"p-24 pb-8",children:[(0,g.jsx)(de.Z,{variant:"contained",color:"secondary",className:"w-full",onClick:function(){a(!0)},children:m("COMPOSE")}),(0,g.jsxs)(ce.Z,{open:e,onClose:function(){a(!1)},"aria-labelledby":"form-dialog-title",scroll:"body",children:[(0,g.jsx)(oe.Z,{position:"static",elevation:0,children:(0,g.jsx)(xe.Z,{className:"flex w-full",children:(0,g.jsx)(x.Z,{variant:"subtitle1",color:"inherit",children:"New Message"})})}),(0,g.jsxs)("form",{noValidate:!0,onSubmit:t((function(e){console.info(e),a(!1)})),className:"flex flex-col",children:[(0,g.jsxs)(pe.Z,{classes:{root:"p-16 pb-0 sm:p-24 sm:pb-0"},children:[(0,g.jsx)(ue.Qr,{name:"from",control:s,render:e=>{let{field:a}=e;return(0,g.jsx)(he.Z,{...a,className:"mt-8 mb-16",label:"From",id:"from",variant:"outlined",fullWidth:!0,inputProps:{readOnly:!0}})}}),(0,g.jsx)(ue.Qr,{name:"to",control:s,render:e=>{var a;let{field:l}=e;return(0,g.jsx)(he.Z,{...l,className:"mt-8 mb-16",label:"To",autoFocus:!0,id:"to",error:!!c.to,helperText:null===c||void 0===c||null===(a=c.to)||void 0===a?void 0:a.message,variant:"outlined",fullWidth:!0,required:!0})}}),(0,g.jsx)(ue.Qr,{name:"cc",control:s,render:e=>{let{field:a}=e;return(0,g.jsx)(he.Z,{...a,className:"mt-8 mb-16",label:"Cc",id:"cc",variant:"outlined",fullWidth:!0})}}),(0,g.jsx)(ue.Qr,{name:"bcc",control:s,render:e=>{let{field:a}=e;return(0,g.jsx)(he.Z,{...a,className:"mt-8 mb-16",label:"Bcc",id:"bcc",name:"bcc",variant:"outlined",fullWidth:!0})}}),(0,g.jsx)(ue.Qr,{name:"subject",control:s,render:e=>{let{field:a}=e;return(0,g.jsx)(he.Z,{...a,className:"mt-8 mb-16",label:"Subject",id:"subject",name:"subject",variant:"outlined",fullWidth:!0})}}),(0,g.jsx)(ue.Qr,{className:"mt-8 mb-16",render:e=>{let{field:a}=e;return(0,g.jsx)(Ne,{...a})},name:"message",control:s}),(0,g.jsxs)("div",{className:"pt-8",children:[(0,g.jsx)(Ce,{fileName:"attachment-2.doc",size:"12 kb"}),(0,g.jsx)(Ce,{fileName:"attachment-1.jpg",size:"350 kb"})]})]}),(0,g.jsxs)(me.Z,{className:"justify-between px-8 py-16",children:[(0,g.jsxs)("div",{className:"px-16",children:[(0,g.jsx)(de.Z,{variant:"contained",color:"primary",type:"submit",disabled:d.Z.isEmpty(o)||!n,children:"Send"}),(0,g.jsx)(h.Z,{size:"large",children:(0,g.jsx)(p.Z,{children:"attach_file"})})]}),(0,g.jsx)(h.Z,{onClick:function(){a(!1)},size:"large",children:(0,g.jsx)(p.Z,{children:"delete"})})]})]})]})]})},Pe=(0,v.hg)("mailApp/filters/getFilters",(async()=>{const e=await Z.Z.get("/api/mail-app/filters");return await e.data})),Ae=(0,v.HF)({}),{selectAll:Fe,selectById:Ie}=Ae.getSelectors((e=>e.mailApp.filters)),Me=(0,v.oM)({name:"mailApp/filters",initialState:Ae.getInitialState({}),reducers:{},extraReducers:{[Pe.fulfilled]:Ae.setAll}}).reducer,Ee=(0,v.hg)("mailApp/folders/getFolders",(async()=>{const e=await Z.Z.get("/api/mail-app/folders");return await e.data})),Re=(0,v.HF)({}),{selectAll:Te,selectById:He}=Re.getSelectors((e=>e.mailApp.folders)),ze=(0,v.oM)({name:"mailApp/folders",initialState:Re.getInitialState({}),reducers:{},extraReducers:{[Ee.fulfilled]:Re.setAll}}).reducer,Oe=(0,o.ZP)(re.ZP)((e=>{let{theme:a}=e;return{color:"inherit!important",textDecoration:"none!important",height:40,width:"100%",borderRadius:6,paddingLeft:12,paddingRight:12,marginBottom:4,"&.active":{backgroundColor:"light"===a.palette.mode?"rgba(0, 0, 0, .05)!important":"rgba(255, 255, 255, .1)!important",pointerEvents:"none","& .list-item-icon":{color:"inherit"}},"& .list-item-icon":{fontSize:16,width:16,height:16,marginRight:16}}}));const We=function(e){const a=(0,s.v9)(Te),l=(0,s.v9)(S),t=(0,s.v9)(Fe),{t:r}=(0,B.$)("mailApp");return(0,g.jsxs)(u.E.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1,transition:{delay:.4}},className:"flex-auto border-l-1",children:[(0,g.jsx)(ke,{}),(0,g.jsxs)("div",{className:"px-12",children:[(0,g.jsxs)(te.Z,{children:[(0,g.jsx)(se.Z,{className:"pl-12",disableSticky:!0,children:r("FOLDERS")}),a.length>0&&a.map((e=>(0,g.jsxs)(Oe,{button:!0,component:le.Z,to:"/apps/mail/".concat(e.handle),activeClassName:"active",children:[(0,g.jsx)(p.Z,{className:"list-item-icon",color:"action",children:e.icon}),(0,g.jsx)(ie.Z,{primary:e.translate?r(e.translate):e.title,disableTypography:!0})]},e.id)))]}),(0,g.jsxs)(te.Z,{children:[(0,g.jsx)(se.Z,{className:"pl-12",disableSticky:!0,children:r("FILTERS")}),t.length>0&&t.map((e=>(0,g.jsxs)(Oe,{button:!0,component:le.Z,to:"/apps/mail/filter/".concat(e.handle),activeClassName:"active",children:[(0,g.jsx)(p.Z,{className:"list-item-icon",color:"action",children:e.icon}),(0,g.jsx)(ie.Z,{primary:e.translate?r(e.translate):e.title,disableTypography:!0})]},e.id)))]}),(0,g.jsxs)(te.Z,{children:[(0,g.jsx)(se.Z,{className:"pl-12",disableSticky:!0,children:r("LABELS")}),l&&l.map((e=>(0,g.jsxs)(Oe,{button:!0,component:le.Z,to:"/apps/mail/label/".concat(e.handle),children:[(0,g.jsx)(p.Z,{className:"list-item-icon",style:{color:e.color},color:"action",children:"label"}),(0,g.jsx)(ie.Z,{primary:e.title,disableTypography:!0})]},e.id)))]})]})]})};var Be=l(51405);const _e={creapond:"johndoe@creapond.com",withinpixels:"johndoe@withinpixels.com"};const Le=function(e){const[a,l]=(0,i.useState)("creapond"),{t:t}=(0,B.$)("mailApp");return(0,g.jsxs)("div",{className:"flex flex-col justify-center h-full p-24",children:[(0,g.jsxs)("div",{className:"flex items-center flex-1",children:[(0,g.jsx)(p.Z,{component:u.E.span,initial:{scale:0},animate:{scale:1,transition:{delay:.2}},className:"text-24 md:text-32",children:"mail"}),(0,g.jsx)(x.Z,{component:u.E.span,initial:{x:-20},animate:{x:0,transition:{delay:.2}},delay:300,className:"text-16 md:text-24 mx-12 font-semibold",children:t("APP_TITLE")})]}),(0,g.jsx)(u.E.div,{initial:{y:20,opacity:.8},animate:{y:0,opacity:1,transition:{delay:.3}},children:(0,g.jsx)(he.Z,{className:"w-full",id:"account-selection",select:!0,label:a,value:a,onChange:function(e){l(e.target.value)},placeholder:"Select Account",margin:"normal",variant:"filled",children:Object.keys(_e).map(((e,a)=>(0,g.jsx)(Be.Z,{value:e,children:_e[e]},e)))})})]})};var De=l(34814),Ue=l(44758);const Ve=(0,o.ZP)(re.ZP)((e=>{let{theme:a,unread:l,selected:t}=e;return{...l&&{background:"rgba(0,0,0,0.03)"},...t&&{"&::after":{content:'""',position:"absolute",top:0,left:0,display:"block",height:"100%",width:3,backgroundColor:a.palette.primary.main}}}})),Qe=l(64883),$e=(0,n.EN)((e=>{const a=(0,s.I0)(),l=(0,s.v9)((e=>{let{mailApp:a}=e;return a.mails.selectedMailIds})),t=(0,s.v9)(C),r=(0,n.UO)(),i=Qe.compile(e.match.path),o=l.length>0&&void 0!==l.find((a=>a===e.mail.id));return(0,g.jsxs)(Ve,{dense:!0,button:!0,onClick:()=>e.history.push(i({...r,mailId:e.mail.id})),selected:o,unread:e.mail.read?0:1,className:"items-start py-20 px-0 md:px-8 relative",children:[(0,g.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-start",children:[(0,g.jsx)(Ue.Z,{tabIndex:-1,disableRipple:!0,checked:o,onChange:()=>a(J(e.mail.id)),onClick:e=>e.stopPropagation()}),(0,g.jsx)("div",{className:"px-8 order-first sm:order-none",children:e.mail.from.avatar?(0,g.jsx)(c.Z,{alt:e.mail.from.name,src:e.mail.from.avatar}):(0,g.jsx)(c.Z,{sx:{backgroundColor:e=>e.palette.primary[500]},children:e.mail.from.name[0]})})]}),(0,g.jsxs)("div",{className:"flex flex-1 flex-col relative overflow-hidden px-8",children:[(0,g.jsx)(x.Z,{className:"font-medium",children:e.mail.from.name}),(0,g.jsxs)("div",{className:"flex flex-col py-4",children:[(0,g.jsx)(x.Z,{className:"truncate text-14 pb-2",children:e.mail.subject}),(0,g.jsx)(x.Z,{color:"textSecondary",className:"truncate",children:d.Z.truncate(e.mail.message.replace(/<(?:.|\n)*?>/gm,""),{length:180})})]}),(0,g.jsx)("div",{className:"flex -mx-2",children:!d.Z.isEmpty(t)&&e.mail.labels.map((e=>(0,g.jsx)(b,{className:"mx-2 mt-4",title:t[e].title,color:t[e].color},e)))})]}),(0,g.jsx)("div",{className:"px-8",children:(0,g.jsx)(x.Z,{className:"text-12",color:"textSecondary",children:e.mail.time})})]})}));const Ke=(0,n.EN)((function(e){const a=(0,s.I0)(),l=(0,s.v9)(Q),t=(0,s.v9)((e=>{let{mailApp:a}=e;return a.mails.searchText})),r=(0,n.UO)(),[o,d]=(0,i.useState)(null),{t:c}=(0,B.$)("mailApp");if((0,f.KW)((()=>{a(L(r))}),[a,r]),(0,i.useEffect)((()=>{l&&d(0===t.length?l:De.Z.filterArrayByString(l,t))}),[l,t]),!o)return null;if(0===o.length)return(0,g.jsx)(u.E.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.1}},className:"flex flex-1 items-center justify-center h-full",children:(0,g.jsx)(x.Z,{color:"textSecondary",variant:"h5",children:c("NO_MESSAGES")})});const m={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return(0,g.jsx)(te.Z,{className:"p-0",children:(0,g.jsx)(u.E.div,{variants:{show:{transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",v:!0,children:o.map((e=>(0,g.jsx)(u.E.div,{variants:m,children:(0,g.jsx)($e,{mail:e})},e.id)))})})}));var Ye=l(85582);const qe=function(e){const a=(0,s.I0)(),l=(0,s.v9)((e=>{let{mailApp:a}=e;return a.mails.selectedMailIds})),t=(0,s.v9)(Q),r=(0,s.v9)(S),n=(0,s.v9)(Te),[o,d]=(0,i.useState)({selectMenu:null,foldersMenu:null,labelsMenu:null});function c(e,a){d({...a,[a]:e.currentTarget})}function m(e,a){d({...a,[a]:null})}return(0,g.jsxs)("div",{className:"flex flex-1 items-center sm:px-8",children:[(0,g.jsx)(Ue.Z,{onChange:function(e){return e.target.checked?a(q()):a(G())},checked:l.length===Object.keys(t).length&&l.length>0,indeterminate:l.length!==Object.keys(t).length&&l.length>0}),(0,g.jsx)(h.Z,{className:"",size:"small","aria-label":"More","aria-owns":o.select?"select-menu":null,"aria-haspopup":"true",onClick:e=>c(e,"select"),children:(0,g.jsx)(p.Z,{children:"arrow_drop_down"})}),(0,g.jsxs)(Ye.Z,{id:"select-menu",anchorEl:o.select,open:Boolean(o.select),onClose:e=>m(0,"select"),children:[(0,g.jsx)(Be.Z,{onClick:e=>{a(q()),m(0,"select")},children:"All"}),(0,g.jsx)(Be.Z,{onClick:e=>{a(G()),m(0,"select")},children:"None"}),(0,g.jsx)(Be.Z,{onClick:e=>{a(X(["read",!0])),m(0,"select")},children:"Read"}),(0,g.jsx)(Be.Z,{onClick:e=>{a(X(["read",!1])),m(0,"select")},children:"Unread"}),(0,g.jsx)(Be.Z,{onClick:e=>{a(X(["starred",!0])),m(0,"select")},children:"Starred"}),(0,g.jsx)(Be.Z,{onClick:e=>{a(X(["starred",!1])),m(0,"select")},children:"Unstarred"}),(0,g.jsx)(Be.Z,{onClick:e=>{a(X(["important",!0])),m(0,"select")},children:"Important"}),(0,g.jsx)(Be.Z,{onClick:e=>{a(X(["important",!1])),m(0,"select")},children:"Unimportant"})]}),l.length>0&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"border-r-1 h-48 w-1 mx-12 my-0"}),(0,g.jsx)(h.Z,{onClick:e=>a(D(4)),"aria-label":"Delete",size:"large",children:(0,g.jsx)(p.Z,{children:"delete"})}),(0,g.jsx)(h.Z,{"aria-label":"More","aria-owns":o.folders?"folders-menu":null,"aria-haspopup":"true",onClick:e=>c(e,"folders"),size:"large",children:(0,g.jsx)(p.Z,{children:"folder"})}),(0,g.jsx)(Ye.Z,{id:"folders-menu",anchorEl:o.folders,open:Boolean(o.folders),onClose:e=>m(0,"folders"),children:n.length>0&&n.map((e=>(0,g.jsx)(Be.Z,{onClick:l=>{a(D(e.id)),m(0,"folders")},children:e.title},e.id)))}),(0,g.jsx)(h.Z,{"aria-label":"More","aria-owns":o.labels?"labels-menu":null,"aria-haspopup":"true",onClick:e=>c(e,"labels"),size:"large",children:(0,g.jsx)(p.Z,{children:"label"})}),(0,g.jsx)(Ye.Z,{id:"folders-menu",anchorEl:o.labels,open:Boolean(o.labels),onClose:e=>m(0,"labels"),children:r.length>0&&r.map((e=>(0,g.jsx)(Be.Z,{onClick:l=>{a(U(e.id)),m(0,"labels")},children:e.title},e.id)))})]})]})};const Ge=(0,l(80821).UY)({mails:ee,mail:I,folders:ze,labels:k,filters:Me}),Xe=(0,o.ZP)(t.Z)((e=>{let{theme:a}=e;return{"& .FusePageCarded-header":{minHeight:72,height:72,alignItems:"center",[a.breakpoints.up("sm")]:{minHeight:136,height:136}},"& .FusePageCarded-content":{display:"flex",flexDirection:"column"}}}));const Je=(0,r.Z)("mailApp",Ge)((function(e){const a=(0,s.I0)(),l=(0,i.useRef)(null),t=(0,n.UO)();return(0,i.useEffect)((()=>{a(Pe()),a(Ee()),a(y())}),[a]),(0,g.jsx)(Xe,{header:(0,g.jsx)(ae,{pageLayout:l}),contentToolbar:t.mailId?(0,g.jsx)(T,{}):(0,g.jsx)(qe,{}),content:t.mailId?(0,g.jsx)(M,{}):(0,g.jsx)(Ke,{}),leftSidebarHeader:(0,g.jsx)(Le,{}),leftSidebarContent:(0,g.jsx)(We,{}),ref:l,innerScroll:!0})}))}}]);